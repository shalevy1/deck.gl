<!DOCTYPE html>
<html>
<head>
  <style type="text/css">
    body {padding: 0; margin: 0;}
    #app {width: 100vw; height: 100vh; overflow: hidden;}
  </style>
</head>
<body>
  <div id="app"></div>
  <script src="/modules/jupyter-widget/dist/standalone-html-bundle.js"></script>
  <script type="text/javascript">

function render(jsonInput) {
    createDeckWithImports({
      mapboxApiKey: 'NO_API_KEY', 
      container: document.getElementById('app'),
      jsonInput,
      useTooltip: true,
      onComplete: ({deckgl}) => {
        deckgl.setProps({
          onAfterRender: () => window.top.postMessage('done')
        });
      }
    });
}

window.onmessage = evt => {
  if (evt.data.json) {
    render(evt.data.json);
  }
};

  </script>
</body>
</html>
